// Version 1.0

jQuery(document).ready(function(){jQuery('.pinnable').pinUnPin();});

jQuery.fn.pinUnPin=function(){var f={"border-top":"2px solid #333","border-bottom":"2px solid #333"},g={"border-top":"","border-bottom":""};return this.each(function(){jQuery(this).css("position","relative");jQuery(this).append("<a href='javascript:void(0)' class='pinLink' title='pin to top page'><span>pin to top page</span></a>");var a=jQuery(this);jQuery(this).find(".pinLink:first").click(function(){var c=jQuery(this);if(a.hasClass("currentlyPinned"))a.fadeOut("normal",function(){a.css({position:"relative", top:""}).removeClass("currentlyPinned").css(g);c.attr("title","pin to top page").addClass("pinLink").removeClass("unpinLink").find("span:first").text("pin to top page");a.fadeIn("normal");var b=[];jQuery(".currentlyPinned").each(function(){b[parseInt(jQuery(this).css("top"))]=jQuery(this)});var d=15;for(var h in b){jQuerycurrentDiv=b[h];jQuerycurrentDiv.css({position:"fixed",top:d+"px"});d+=jQuerycurrentDiv.outerHeight()+5}});else{var e=15;jQuery(".currentlyPinned").each(function(){e+=jQuery(this).outerHeight()+ 5});a.fadeOut("normal",function(){c.attr("title","remove pin").removeClass("pinLink").addClass("unpinLink").find("span:first").text("remove pin");jQuery(this).css({position:"fixed",top:e+"px"}).addClass("currentlyPinned").css(f).fadeIn("normal")})}})})};